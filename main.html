<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Click and Drag</title>
  <style>
    .container {
      width: 500px;
      height: 500px;
      position: relative;
      border: 2px solid #000;
      margin: 20px auto;
      overflow: hidden;
    }
    .cube {
      width: 60px;
      height: 60px;
      background: lightblue;
      position: absolute;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
      transition: none;
    }
    .cube.active {
      cursor: grabbing;
      opacity: 0.7;
    }
  </style>
</head>
<body>
  <div class="container" id="container">
    <!-- Cubes will be generated dynamically -->
  </div>
  
  <script>
    const container = document.getElementById('container');
    const cubeSize = 60; // width and height of each cube
    const gap = 10;      // gap between cubes in the grid
    // Calculate how many cubes fit in one row
    const cubesPerRow = Math.floor((container.clientWidth + gap) / (cubeSize + gap));
    const totalCubes = 25; // change this to generate any number of cubes

    // Create cubes in a grid formation
    for (let i = 0; i < totalCubes; i++) {
      const cube = document.createElement('div');
      cube.className = 'cube';
      cube.textContent = i + 1;
      // Calculate initial left and top positions
      const col = i % cubesPerRow;
      const row = Math.floor(i / cubesPerRow);
      cube.style.left = (col * (cubeSize + gap)) + 'px';
      cube.style.top = (row * (cubeSize + gap)) + 'px';
      container.appendChild(cube);
    }
    
    let isDragging = false;
    let currentCube = null;
    let offsetX = 0, offsetY = 0;
    
    // Attach mousedown event listener to each cube for selection
    const cubes = document.querySelectorAll('.cube');
    cubes.forEach(cube => {
      cube.addEventListener('mousedown', (e) => {
        isDragging = true;
        currentCube = cube;
        currentCube.classList.add('active');
        // Get the cube's current bounding rectangle and calculate offset
        const rect = currentCube.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
      });
    });
    
    // Update the cube's position based on mouse movement
    document.addEventListener('mousemove', (e) => {
      if (!isDragging || !currentCube) return;
      e.preventDefault(); // Prevent unwanted text selection

      // Get container's position for calculating relative coordinates
      const containerRect = container.getBoundingClientRect();
      let newLeft = e.clientX - containerRect.left - offsetX;
      let newTop = e.clientY - containerRect.top - offsetY;
      
      // Enforce boundary constraints within the container
      if (newLeft < 0) newLeft = 0;
      if (newTop < 0) newTop = 0;
      const maxLeft = container.clientWidth - currentCube.offsetWidth;
      const maxTop = container.clientHeight - currentCube.offsetHeight;
      if (newLeft > maxLeft) newLeft = maxLeft;
      if (newTop > maxTop) newTop = maxTop;
      
      // Update cube's position
      currentCube.style.left = newLeft + 'px';
      currentCube.style.top = newTop + 'px';
    });
    
    // When the mouse is released, stop dragging
    document.addEventListener('mouseup', () => {
      if (isDragging && currentCube) {
        isDragging = false;
        currentCube.classList.remove('active');
        currentCube = null;
      }
    });
  </script>
</body>
</html>
